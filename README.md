# BiliAutoClicker

## 程序介绍

这是一个用于B站活动抢码的自动化程序，支持多TaskID同时抢码、服务端同步配置、批量上传结果等功能。

## 功能特性

- ✅ 服务端同步TaskID列表
- ✅ 多TaskID同时抢码
- ✅ 自定义抢码时间和间隔
- ✅ 批量上传抢码结果
- ✅ 自动关机功能
- ✅ 支持多种浏览器（Chromium、Firefox、WebKit、Chrome、Edge）
- ✅ API响应监控和日志记录
- ✅ 页面信息提取和上传
- ✅ 本地备份上传失败的数据

## 系统要求

- Windows 10/11 操作系统
- Python 3.8+
- 网络连接
- 已登录B站账号的浏览器环境

## 安装方法

### 方法一：使用已打包的可执行文件

1. 直接运行 `main.exe` 即可

### 方法二：从源代码运行

1. 克隆或下载本项目到本地
2. 安装依赖：
   ```bash
   pip install customtkinter playwright requests pillow
   ```
3. 运行 `playwright install` 安装浏览器驱动
4. 运行 `python main.py` 启动程序

## 使用步骤

1. **启动程序**：运行 `main.exe` 或 `python main.py`

2. **配置浏览器**：
   - 在界面上方选择浏览器类型（如 Chromium、Firefox 等）
   - 如需使用特定浏览器可执行文件，点击"浏览"选择路径并保存

3. **添加TaskID**：
   - 点击"刷新服务端TaskID"自动同步服务端的TaskID列表
   - 勾选需要抢码的TaskID，点击"添加选中TaskID"
   - 或在"手动输入TaskID"框中输入额外的TaskID并点击"添加"

4. **配置任务参数**：
   - 点击"编辑选中"修改任务的开始时间、点击间隔和持续时间
   - 开始时间格式：`HH:MM:SS` 或 `+秒数`（相对时间）
   - 点击"应用默认值"将所有任务恢复为默认配置

5. **开始抢码**：
   - 点击"开始任务"按钮启动抢码过程
   - 程序会自动打开浏览器，加载TaskID页面，并在指定时间开始抢码
   - 抢码过程中可以点击"停止任务"终止操作

6. **查看结果**：
   - 抢码完成后，程序会自动批量上传结果到服务端
   - 也可以点击"手动上传结果"手动触发上传
   - 日志区域会显示详细的操作过程和结果

7. **特殊功能**：
   - 点击"特殊功能"可以设置任务完成后自动关机
   - 可配置关机延迟时间（分钟）

## 配置说明

### unified_config.json 配置文件

```json
{
  "client": {
    "server_url": "http://ocean.run.place",  // 服务端地址
    "local_cookies_dir": "D:/autowatch_cookies"  // Cookie存储目录
  },
  "browser": {
    "browser_type": "chromium",  // 默认浏览器类型
    "browser_executable_path": null  // 浏览器可执行文件路径
  },
  "app_config": {
    // 应用配置参数
  },
  "special_features": {
    "screen_recording": {
      "enabled": false,  // 是否启用屏幕录制
      "output_path": "D:\\@Some_Uesless_Program\\B站抢码\\recordings",  // 录制输出路径
      "fps": 10  // 录制帧率
    },
    "auto_shutdown": {
      "enabled": true,  // 是否启用自动关机
      "delay_minutes": 5  // 关机延迟时间（分钟）
    }
  }
}
```

## 常见问题

1. **程序启动失败**
   - 检查是否安装了所有依赖
   - 检查 `unified_config.json` 文件是否存在且格式正确
   - 检查 `zh-cn.ttf` 字体文件是否存在

2. **浏览器启动失败**
   - 确保已安装对应浏览器
   - 如使用自定义浏览器路径，确保路径正确
   - 检查浏览器是否已登录B站账号

3. **抢码失败**
   - 检查网络连接是否正常
   - 检查TaskID是否有效
   - 检查开始时间设置是否正确
   - 确保浏览器中已登录B站账号

4. **上传结果失败**
   - 检查网络连接是否正常
   - 检查服务端地址是否正确
   - 程序会自动保存本地备份，可在网络恢复后重新上传

5. **字体显示异常**
   - 确保 `zh-cn.ttf` 字体文件存在
   - 如仍有问题，可修改 `gui.py` 中的字体设置

## 注意事项

- 使用前请确保已用autowatch登录B站账号
- 请合理设置抢码间隔，避免对B站服务器造成过大压力
- 自动关机功能启用后，任务完成将自动关机，请确保已保存所有工作
- 程序仅用于学习和研究目的，请勿用于任何违规行为

## 作者信息

- 作者：ocean之下
- B站主页：https://space.bilibili.com/3546571704634103
- 服务端地址：http://biliapi.ocean.run.place

## 更新日志

- **v1.0**：初始版本，支持基本抢码功能
- **v2.0**：增加服务端同步、批量上传、自动关机等功能
- **v2.3**：优化浏览器配置、增加页面信息提取、改进日志系统

## 许可证

本项目仅供学习和研究使用，请勿用于商业目的。
